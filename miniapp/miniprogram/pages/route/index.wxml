<view class="page">
  <!-- 头部 -->
  <view class="page-header">
    <view class="brand">
      <view class="logo-box">
        <view class="logo-icon icon-paper-plane"></view>
      </view>
      <text class="brand-text">Travel Planner</text>
    </view>
    
    <!-- 顶部标签栏 -->
    <view class="top-tabs">
      <view class="tab-item" bindtap="goInput">
        <view class="tab-icon icon-compass"></view>
        <text class="tab-text">输入</text>
      </view>
      <view class="tab-item active">
        <view class="tab-icon icon-route"></view>
        <text class="tab-text">路线</text>
      </view>
      <view class="tab-item" bindtap="goGuide">
        <view class="tab-icon icon-book"></view>
        <text class="tab-text">攻略</text>
      </view>
    </view>
  </view>

  <view class="module">
    <scroll-view scroll-y class="module-scroll">
      <!-- Route Map Card -->
      <view class="card">
        <view class="card-title has-icon">
          <view class="title-icon icon-map"></view>
          <text>路线预览</text>
        </view>
        <view class="map-frame">
          <map
            id="routeMap"
            class="map"
            longitude="{{routeMap.lng}}"
            latitude="{{routeMap.lat}}"
            scale="{{routeMap.scale}}"
            markers="{{markers}}"
            polyline="{{polylines}}"
            include-points="{{allPoints}}"
            show-location
          ></map>
        </view>
        <view class="badge" wx:if="{{routeData.legs.length > 0}}">最优路线已生成</view>
      </view>

      <!-- Route List Card -->
      <view class="card">
        <view class="card-title has-icon">
          <view class="title-icon icon-list"></view>
          <text>路线列表</text>
        </view>
        
        <view class="route-list">
          <block wx:for="{{routeData.legs}}" wx:key="index">
            <view class="route-item">
              <view class="route-info">
                <text class="route-title">{{item.start.name}} → {{item.end.name}}</text>
                <text class="route-addr">详细地址：{{item.end.address || item.end.name}}</text>
                <text class="route-meta">距离 {{item.distanceText}}</text>
              </view>
              <view class="pill" bindtap="onNavLeg" data-index="{{index}}">导航</view>
            </view>
          </block>
        </view>
        
        <view wx:if="{{routeData.legs.length === 0}}" class="empty-hint">请先设置起点并添加目的地</view>
      </view>
    </scroll-view>
  </view>
</view>
